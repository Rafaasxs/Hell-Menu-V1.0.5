local lib = {}
local gui = Instance.new("ScreenGui", game.CoreGui)

-- Função para arrastar a janela
local function makeDraggable(frame, dragHandle)
    local dragging, dragInput, startPos, dragStart = false, nil, nil, nil

    dragHandle.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = true
            dragStart = input.Position
            startPos = frame.Position
            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then
                    dragging = false
                end
            end)
        end
    end)

    dragHandle.InputChanged:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseMovement then
            dragInput = input
        end
    end)

    game:GetService("UserInputService").InputChanged:Connect(function(input)
        if input == dragInput and dragging then
            local delta = input.Position - dragStart
            frame.Position = UDim2.new(
                startPos.X.Scale,
                startPos.X.Offset + delta.X,
                startPos.Y.Scale,
                startPos.Y.Offset + delta.Y
            )
        end
    end)
end

-- Cria a janela principal
function lib:Window(title)
    local window = Instance.new("Frame", gui)
    window.Size = UDim2.new(0, 400, 0, 300)
    window.Position = UDim2.new(0.5, -200, 0.5, -150)
    window.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
    window.BorderSizePixel = 0

    local header = Instance.new("TextLabel", window)
    header.Size = UDim2.new(1, 0, 0, 30)
    header.Text = title
    header.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
    header.TextColor3 = Color3.new(1, 1, 1)
    header.Font = Enum.Font.SourceSans
    header.TextSize = 18
    header.BorderSizePixel = 0
    header.TextXAlignment = Enum.TextXAlignment.Left

    local padding = Instance.new("UIPadding", header)
    padding.PaddingLeft = UDim.new(0, 10)

    makeDraggable(window, header)

    return window
end

-- Adiciona botões na janela
function lib:Button(parent, text, callback)
    local button = Instance.new("TextButton", parent)
    button.Size = UDim2.new(1, -20, 0, 30)
    button.Position = UDim2.new(0, 10, 0, 10 + (#parent:GetChildren() - 1) * 40)
    button.Text = text
    button.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
    button.TextColor3 = Color3.new(1, 1, 1)
    button.Font = Enum.Font.SourceSans
    button.TextSize = 16
    button.BorderSizePixel = 0

    button.MouseButton1Click:Connect(callback)
    return button
end

return lib
