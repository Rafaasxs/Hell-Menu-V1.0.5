local lib = {}
local gui = Instance.new("ScreenGui", game.CoreGui)

-- Função de Drag
local function makeDraggable(frame, dragHandle)
    local dragging, dragInput, startPos, dragStart = false, nil, nil, nil

    dragHandle.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = true
            dragStart = input.Position
            startPos = frame.Position
            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then
                    dragging = false
                end
            end)
        end
    end)

    dragHandle.InputChanged:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseMovement then
            dragInput = input
        end
    end)

    game:GetService("UserInputService").InputChanged:Connect(function(input)
        if input == dragInput and dragging then
            local delta = input.Position - dragStart
            frame.Position = UDim2.new(
                startPos.X.Scale,
                startPos.X.Offset + delta.X,
                startPos.Y.Scale,
                startPos.Y.Offset + delta.Y
            )
        end
    end)
end

function lib:Window(t)
    local w = Instance.new("Frame", gui)
    w.Size = UDim2.new(0, 400, 0, 300)
    w.Position = UDim2.new(0.5, -200, 0.5, -150)
    w.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
    w.BorderSizePixel = 0

    local h = Instance.new("TextLabel", w)
    h.Size = UDim2.new(1, 0, 0, 30)
    h.Text = t
    h.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
    h.TextColor3 = Color3.new(1, 1, 1)
    h.Font = Enum.Font.SourceSans
    h.TextSize = 18
    h.BorderSizePixel = 0
    h.TextXAlignment = Enum.TextXAlignment.Left

    local padding = Instance.new("UIPadding", h)
    padding.PaddingLeft = UDim.new(0, 10)

    -- Torna a janela arrastável
    makeDraggable(w, h)

    return w
end

function lib:Button(w, t, f)
    local b = Instance.new("TextButton", w)
    b.Size = UDim2.new(1, -20, 0, 30)
    b.Position = UDim2.new(0, 10, 0, 40)
    b.Text = t
    b.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
    b.TextColor3 = Color3.new(1, 1, 1)
    b.Font = Enum.Font.SourceSans
    b.TextSize = 16
    b.BorderSizePixel = 0
    b.MouseButton1Click:Connect(f)
    return b
end

return lib
